{"version":3,"sources":["./src/app/register/register.page.html","./src/app/register/register-routing.module.ts","./src/app/register/register.module.ts","./src/app/register/register.page.scss","./src/app/register/register.page.ts","./src/app/services/json.service.ts","./src/app/services/session.service.ts"],"names":[],"mappings":"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","file":"register-register-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Register User</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <form>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label position=\\\"floating\\\">Nombre</ion-label>\\r\\n      <ion-input type=\\\"text\\\" #name required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label position=\\\"floating\\\">Apellido</ion-label>\\r\\n      <ion-input type=\\\"text\\\" #lastname required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label position=\\\"floating\\\">Email</ion-label>\\r\\n      <ion-input type=\\\"text\\\" #email required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\r\\n      <ion-input type=\\\"password\\\" #password required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label position=\\\"floating\\\">Codigo</ion-label>\\r\\n      <ion-input type=\\\"password\\\" #code required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"full\\\">\\r\\n      <ion-label position=\\\"floating\\\">Carrera</ion-label>\\r\\n      <ion-input type=\\\"password\\\" #degree required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-button type=\\\"submit\\\" (click)=\\\"onRegister(email, password, name, lastname, code, degree)\\\" expand=\\\"block\\\">Register</ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </form>\\r\\n  <ion-row>\\r\\n    <ion-col>\\r\\n      <p>\\r\\n        <a routerLink=\\\"/login\\\">Already have an account? </a>\\r\\n      </p>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RegisterPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPageRoutingModule } from './register-routing.module';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RegisterPageRoutingModule\r\n  ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { AuthService } from './../services/auth.service';\r\nimport { Router } from '@angular/router';\r\nimport { JsonService } from '../services/json.service';\r\nimport { Session } from '../model/session.model';\r\nimport { SessionService } from '../services/session.service';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.page.html',\r\n  styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n  constructor(private authSvc: AuthService, private router: Router, private jsonService : JsonService, private sessionService: SessionService) {}\r\n  \r\n  ngOnInit(): void {\r\n\r\n  }\r\n  \r\n\r\n  async onRegister(email, password, name, lastname, code, degree) {\r\n   /*  let request = {\r\n      email.value, password, name, lastname, code, degree\r\n    } */\r\n    try {\r\n     \r\n      this.jsonService.register(null, email.value,  password.value, name.value, lastname.value, code.value, degree.value).subscribe((data) => {\r\n        let response : Session;\r\n        response = data;\r\n        if (response != null) {\r\n          this.sessionService.setSessionLoggedIn(response);\r\n        }\r\n      })\r\n     } catch (error) {\r\n      console.log('Error', error);\r\n    }\r\n    try {\r\n      const user = await this.authSvc.register(email.value, password.value);\r\n      if (user) {\r\n        const isVerified = this.authSvc.isEmailVerified(user);\r\n        this.redirectUser(isVerified);\r\n      }\r\n    } catch (error) {\r\n      console.log('Error', error);\r\n    }\r\n  }\r\n\r\n  private redirectUser(isVerified: boolean): void {\r\n    if (isVerified) {\r\n      this.router.navigate(['admin']);\r\n    } else {\r\n      this.router.navigate(['verify-email']);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { SessionService } from './session.service';\r\nimport { Session } from '../model/session.model';\r\nimport { Observable } from 'rxjs';\r\nimport { Student } from '../model/student.model';\r\nimport { Subject } from '../model/subject.model';\r\nimport { User } from '../model/user.model';\r\nimport { Grade } from '../model/grade.model';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class JsonService {\r\n\r\n  constructor(private http: HttpClient, public sessionService: SessionService) { }\r\n\r\n  //  endpoint_back = \"http://localhost:3000\";\r\n  endpoint_back = \"https://bk-proyecto-notas.herokuapp.com\"\r\n\r\n  getJson(url: string) {\r\n    return this.http.get(url);\r\n  }\r\n\r\n  login(latitud, longitud, email, password, image): Observable<User> {\r\n    var request = { latitud, longitud, email, password, image}\r\n    console.log(request);\r\n    return this.http.post<User>(this.endpoint_back + \"/perfil/usuario/signin\", request);\r\n  }\r\n\r\n  uploadGrade(id_grade, grade_value, name, date, code, code_subject): Observable<any> {\r\n    var request = { id_grade, grade_value, name, date }\r\n    console.log(request);\r\n    return this.http.post<any>(this.endpoint_back + \"/student/grade/\" + code + \"/\" + code_subject, request);\r\n  }\r\n\r\n  getStudentsBySubject(subject): Observable<Student[]> {\r\n    return this.http.get<Student[]>(this.endpoint_back + \"/course/students/\" + subject);\r\n  }\r\n\r\n  getGradesBySubject(subject, code): Observable<Grade[]> {\r\n    return this.http.get<Grade[]>(this.endpoint_back + \"/student/grade/\" + code + \"/\" + subject);\r\n  }\r\n\r\n  getAverageByStudent(code): Observable<any> {\r\n    return this.http.get<any>(this.endpoint_back + \"/student/grade/average/\" + code);\r\n  }\r\n\r\n  getAverageSubjectsByStudent(code): Observable<any> {\r\n    return this.http.get<any>(this.endpoint_back + \"/student/list/average/grade/\" + code);\r\n  }\r\n\r\n  getSubjectsByTeacher(code): Observable<Subject[]> {\r\n    return this.http.get<Subject[]>(this.endpoint_back + \"/perfil/subjects/\" + code);\r\n  }\r\n\r\n  sendMail(email, subject, message): Observable<string> {\r\n    var request = { email, subject, message };\r\n    return this.http.post<string>(this.endpoint_back + \"/perfil/sendEMail/\", request);\r\n  }\r\n\r\n  postJson(url: string, formData) {\r\n\r\n    if (url == null) {\r\n      url = this.endpoint_back;\r\n    }\r\n\r\n    let s: Session = this.sessionService.getSessionLogged();\r\n    return this.http.post(url, formData);\r\n  }\r\n\r\n  register(url: string, email, password, name, lastname, code, degree): Observable<Session> {\r\n    let request = {\r\n      email, password, name, lastname, code, degree\r\n    }\r\n    if (url == null) {\r\n      url = this.endpoint_back;\r\n    }\r\n\r\n    return this.http.post<Session>(url, request);\r\n  }\r\n  update(url: string, email, password, name, lastname, code, degree): Observable<Session> {\r\n    let request = {\r\n      email, password, name, lastname, code, degree\r\n    }\r\n    if (url == null) {\r\n      url = this.endpoint_back;\r\n    }\r\n\r\n    return this.http.put<Session>(url, request);\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Session } from '../model/session.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SessionService {\r\n  private isSessionLoggedIn: boolean;\r\n  public sessionLogged: Session;\r\n\r\n  constructor() {\r\n  this.isSessionLoggedIn = false;\r\n  }\r\n\r\n  setSessionLoggedIn(session: Session) {\r\n    this.isSessionLoggedIn = true;\r\n    this.sessionLogged = session;\r\n    localStorage.setItem('currentSession', JSON.stringify(session));\r\n  }\r\n  setSessionLoggedOut() {\r\n    const s: Session = null;\r\n    localStorage.setItem('currentSession', JSON.stringify(s));\r\n  }\r\n\r\n  getSessionLogged() {\r\n    if (localStorage.getItem('currentSession')) {\r\n    return JSON.parse(localStorage.getItem('currentSession'));\r\n    }\r\n    return null;\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}